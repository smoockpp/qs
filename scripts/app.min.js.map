{"version":3,"sources":["app.js"],"names":["window","nn","isObject","obj","Object","isString","str","for","$options","callback","i","length","create","target","Error","thisTag","tag","document","createElement","className","id","inner","innerHTML","dataAttr","setAttribute","attr","value","cssText","style","appendChild","console","error","shorten","maxLen","separator","substr","lastIndexOf","cleanHTMLTags","replace","log","Globals","map","getElementById","addEventListener","evt","buildPosts","data","counter","posts","postsContainer","querySelector","post","story","message","thisPost","$","ajax","method","cache","dataType","url","async","success","thisRow","media","image","src","thisPlace","ajaxSetup","get","place","created_time","slice","undefined","name","thisImage","backgroundImage","getAttribute","height","backgroundPosition","backgroundSize","position","width","margin","createMap","ids","google","maps","Map","zoom","center","lat","lng","styles","elementType","stylers","color","featureType","visibility","markerBounds","LatLngBounds","mapPoint","marker","Marker","location","latitude","longitude","LatLng","extend","fitBounds","infowindow","InfoWindow","content","event","addListener","open","addListenerOnce","this","getZoom","setZoom","postsIds","Array","push"],"mappings":"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","file":"app.min.js","sourcesContent":["'use strict';\n\n// NN library\n(function (window) {\n\n    'use strict';\n\n    function define_nn() {\n        var nn = {};\n        function isObject(obj) {\n            return obj === Object(obj);\n        }\n        function isString(str) {\n            return typeof str === 'string';\n        }\n        nn.for = function ($options, callback) {\n            for (var i = 0; i < $options.length; i++) {\n                if (callback(i, $options[i]) === false) break;\n            }\n        };\n        nn.create = function ($options, target) {\n            if (isObject($options)) {\n                var thisTag;\n                if (isString($options.tag)) {\n                    thisTag = document.createElement($options.tag);\n                    if ($options.className) {\n                        thisTag.className = $options.className;\n                    }\n                    if ($options.id) {\n                        thisTag.id = $options.id;\n                    }\n                    if ($options.inner) {\n                        thisTag.innerHTML = $options.inner;\n                    }\n                    if ($options.dataAttr) {\n                        for (var i = 0; i < $options.dataAttr.length; i++) {\n                            thisTag.setAttribute($options.dataAttr[i].attr, $options.dataAttr[i].value);\n                        }\n                    }\n                    if ($options.cssText) {\n                        thisTag.style.cssText = $options.cssText;\n                    }\n                    target.appendChild(thisTag);\n                } else {\n                    console.error(new Error($options.tag + ' is not a String'));\n                }\n            } else {\n                throw new Error($options + ' is not an Object');\n            }\n        };\n        nn.shorten = function (str, maxLen, separator) {\n            separator = ' ';\n            if (typeof str !== 'string') return console.error(str + ' is not a string');\n            if (str.length <= maxLen) {\n                return str;\n            }\n            return str.substr(0, str.lastIndexOf(separator, maxLen)) + '...';\n        };\n        nn.cleanHTMLTags = function (str) {\n            if (typeof str !== 'string') return console.error(str + ' is not a string');\n            str = str.replace(/<(?:.|\\n)*?>/gm, '');\n            return str;\n        };\n        return nn;\n    }\n    //define globally if it doesn't already exist\n    if (typeof nn === 'undefined') {\n        window.nn = define_nn();\n    } else {\n        console.log(\"Library already defined.\");\n    }\n})(window);\n\nvar Globals = {\n    map: document.getElementById('map')\n};\n\ndocument.addEventListener('DOMContentLoaded', function (evt) {\n    function buildPosts(data) {\n        var counter = 0;\n        var posts = data.posts.data;\n        var postsContainer = document.getElementById('posts-container');\n        // console.log(posts);\n        nn.create({\n            tag: 'div',\n            id: 'posts-carousel',\n            dataAttr: [{\n                attr: 'data-ride',\n                value: 'carousel'\n            }],\n            className: 'carousel slide'\n        }, postsContainer);\n        nn.create({\n            tag: 'ol',\n            className: 'carousel-indicators'\n        }, postsContainer.querySelector('#posts-carousel'));\n        nn.create({\n            tag: 'div',\n            className: 'carousel-inner'\n        }, postsContainer.querySelector('#posts-carousel'));\n\n        nn.for(posts, function (i, post) {\n            // console.log(post);\n            if (post.story || post.message) {\n                nn.create({\n                    tag: 'li',\n                    dataAttr: [{\n                        attr: 'data-target',\n                        value: '#posts-carousel'\n                    }, {\n                        attr: 'data-slide-to',\n                        value: counter\n                    }],\n                    className: counter === 0 ? ' active ' : ''\n                }, postsContainer.querySelector('.carousel-indicators'));\n                nn.create({\n                    tag: 'div',\n                    className: 'carousel-item ' + (counter === 0 ? ' active' : ''),\n                    id: 'post-' + counter\n                }, postsContainer.querySelector('.carousel-inner'));\n                var thisPost = document.getElementById('post-' + counter);\n                $.ajax({\n                    method: 'GET',\n                    cache: true,\n                    dataType: 'json',\n                    url: 'https://graph.facebook.com/' + post.id + '/attachments?access_token=503457173353795|d13bc5fd011232eeaa4b5da6b720a2e4',\n                    async: false,\n                    success: function success(data) {\n                        // console.log(data);\n                        nn.create({\n                            tag: 'div',\n                            id: 'row-' + counter,\n                            className: 'row'\n                        }, thisPost);\n                        var thisRow = postsContainer.querySelector('#row-' + counter);\n                        nn.create({\n                            tag: 'div',\n                            dataAttr: [{\n                                attr: 'data-src',\n                                value: data.data[\"0\"].media.image.src\n                            }, {\n                                attr: 'data-alt',\n                                value: post.message ? post.message : post.story\n                            }],\n                            id: 'bg-div-' + counter,\n                            className: 'col-sm-auto col-sm-5'\n                        }, thisRow);\n                        var thisPlace = void 0;\n                        $.ajaxSetup({ async: false });\n                        $.get('https://graph.facebook.com/' + post.id + '?access_token=503457173353795|d13bc5fd011232eeaa4b5da6b720a2e4&fields=place', function (place) {\n                            // console.log(place);\n                            thisPlace = place;\n                            // console.log(thisPlace);\n                        });\n                        nn.create({\n                            tag: 'div',\n                            className: 'carousel-caption col-sm-auto col-sm-5',\n                            inner: '<h3>' + (post.story ? post.story : post.message) + '</h3>\\n                            <p class=\"white\">' + (post.message ? nn.shorten(post.message, 140, '&nbsp;...') : nn.shorten(post.story, 130, '&nbsp;...')) + '</p>\\n                            <span class=\"date white center block\">' + post.created_time.slice(0, 10) + '</span>\\n                            <span class=\"date white center block\">' + (thisPlace.place !== undefined ? thisPlace.place.name : '') + '</span>'\n                        }, thisRow);\n                        var thisImage = document.getElementById('bg-div-' + counter);\n                        // console.log(thisImage);\n                        thisImage.style.backgroundImage = 'url(' + thisImage.getAttribute('data-src') + ')';\n                        thisImage.style.height = '200px';\n                        thisImage.style.backgroundPosition = 'center';\n                        thisImage.style.backgroundSize = 'cover';\n                        thisImage.style.position = 'relative';\n                        thisImage.style.width = '90%';\n                        thisImage.style.margin = '0 auto';\n                    }\n                });\n                counter++;\n            }\n            // const postsImages = document.querySelectorAll('div[data-src]');\n            // nn.for(postsImages, function(i, post) {\n            //     post.style.\n            // });\n        });\n        nn.create({\n            tag: 'a',\n            className: 'carousel-control-prev',\n            dataAttr: [{\n                attr: 'href',\n                value: '#posts-carousel'\n            }, {\n                attr: 'role',\n                value: 'button'\n            }, {\n                attr: 'data-slide',\n                value: 'prev'\n            }],\n            inner: '<span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\\n            <span class=\"sr-only\">Prev</span>'\n        }, postsContainer.querySelector('#posts-carousel'));\n        nn.create({\n            tag: 'a',\n            className: 'carousel-control-next',\n            dataAttr: [{\n                attr: 'href',\n                value: '#posts-carousel'\n            }, {\n                attr: 'role',\n                value: 'button'\n            }, {\n                attr: 'data-slide',\n                value: 'next'\n            }],\n            inner: '<span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\\n            <span class=\"sr-only\">Next</span>'\n        }, postsContainer.querySelector('#posts-carousel'));\n    }\n    function createMap(ids) {\n        var map = void 0;\n        map = new google.maps.Map(Globals.map, {\n            zoom: 4,\n            center: { lat: 51.996629, lng: -2.156587 },\n            styles: [{ elementType: 'geometry', stylers: [{ color: '#18181a' }] }, { elementType: 'labels.text.stroke', stylers: [{ color: '#18181a' }] }, { elementType: 'labels.text.fill', stylers: [{ color: '#ffffff' }] }, {\n                featureType: 'administrative.locality',\n                elementType: 'labels.text.fill',\n                stylers: [{ visibility: 'ccc' }]\n            }, {\n                featureType: 'poi',\n                elementType: 'labels',\n                stylers: [{ visibility: 'off' }]\n            }, {\n                featureType: 'poi.park',\n                elementType: 'geometry',\n                stylers: [{ color: '#000000 ' }]\n            }, {\n                featureType: 'poi.park',\n                elementType: 'labels.text.fill',\n                stylers: [{ color: '#6b9a76' }]\n            }, {\n                featureType: 'road',\n                elementType: 'geometry',\n                stylers: [{ color: '#38414e' }]\n            }, {\n                featureType: 'road',\n                elementType: 'geometry.stroke',\n                stylers: [{ color: '#212a37' }]\n            }, {\n                featureType: 'road',\n                elementType: 'labels.text.fill',\n                stylers: [{ color: '#9ca5b3' }]\n            }, {\n                featureType: 'road.highway',\n                elementType: 'geometry',\n                stylers: [{ color: '#746855' }]\n            }, {\n                featureType: 'road.highway',\n                elementType: 'geometry.stroke',\n                stylers: [{ color: '#1f2835' }]\n            }, {\n                featureType: 'road.highway',\n                elementType: 'labels.text.fill',\n                stylers: [{ color: '#f3d19c' }]\n            }, {\n                featureType: 'transit',\n                elementType: 'geometry',\n                stylers: [{ color: '#2f3948' }]\n            }, {\n                featureType: 'transit.station',\n                elementType: 'labels.text.fill',\n                stylers: [{ color: '#d59563' }]\n            }, {\n                featureType: 'water',\n                elementType: 'geometry',\n                stylers: [{ color: '#17263c' }]\n            }, {\n                featureType: 'water',\n                elementType: 'labels.text.fill',\n                stylers: [{ color: '#515c6d' }]\n            }, {\n                featureType: 'water',\n                elementType: 'labels.text.stroke',\n                stylers: [{ color: '#17263c' }]\n            }]\n        });\n        var markerBounds = new google.maps.LatLngBounds();\n        var mapPoint = void 0;\n        nn.for(ids, function (i, id) {\n            $.ajax({\n                dataType: 'json',\n                url: 'https://graph.facebook.com/' + id + '?access_token=503457173353795|d13bc5fd011232eeaa4b5da6b720a2e4&fields=place,name',\n                success: function success(place) {\n                    console.log(place);\n                    if (place.place) {\n                        var marker = new google.maps.Marker({\n                            position: { lat: place.place.location.latitude, lng: place.place.location.longitude },\n                            map: map\n                        });\n                        mapPoint = new google.maps.LatLng(place.place.location.latitude, place.place.location.longitude);\n                        markerBounds.extend(mapPoint);\n                        map.fitBounds(markerBounds);\n                        var infowindow = new google.maps.InfoWindow({\n                            content: '<p>' + place.name + '</p>'\n                        });\n                        console.log(place.name);\n                        google.maps.event.addListener(marker, 'click', function () {\n                            infowindow.open(map, marker);\n                        });\n                    }\n                }\n            });\n        });\n        google.maps.event.addListenerOnce(map, 'bounds_changed', function (event) {\n            if (this.getZoom()) {\n                this.setZoom(10);\n            }\n        });\n    }\n    $.ajax({\n        cache: true,\n        dataType: 'json',\n        url: 'https://graph.facebook.com/v2.3/devAppJavaScript/?access_token=503457173353795|d13bc5fd011232eeaa4b5da6b720a2e4&fields=posts',\n        success: function success(data) {\n            buildPosts(data);\n            var postsIds = new Array();\n            nn.for(data.posts.data, function (i, post) {\n                postsIds.push(post.id);\n            });\n            createMap(postsIds);\n        }\n    });\n});"]}